!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ManhattanDatePicker=t():e.ManhattanDatePicker=t()}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){n(1),e.exports=n(2)},function(e,t,n){e.exports=n.p+"date-picker.css"},function(e,t,n){var r,a,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}};r=n(3),s=n(4),a=function(){function DatePicker(e,t){var n,a;null==t&&(t={}),this.open=o(this.open,this),this.close=o(this.close,this),r.config(this,{format:"human_en",parsers:["human_en","dmy","iso"]},t,e,this.constructor.pkgPrefix),this._behaviours={},r.config(this._behaviours,{input:"set-value"},t,e,this.constructor.pkgPrefix),this._isOpen=!1,this._dom={},this._dom.input=e,this._dom.input.__mh_typeahead=this,this._dom.picker=r.create("div",{class:[this._bem("mh-date-picker"),this._bem("mh-date-picker","","closed")].join(" ")}),document.body.appendChild(this._dom.picker),a=this.parseCalendarOptions(t,e),this._calendar=new s.Calendar(this._dom.picker,a),Object.defineProperty(this,"calendar",{get:function(e){return function(){return e._calendar}}(this)}),Object.defineProperty(this,"input",{value:this._dom.input}),Object.defineProperty(this,"isOpen",{get:function(e){return function(){return e._isOpen}}(this)}),r.listen(this._dom.input,{blur:function(e){return function(){return e.close("blur")}}(this),focus:function(e){return function(){return e.open()}}(this),change:function(t){return function(){var n;if(n=t.calendar.constructor.parseDate(e.value,t.parsers))return t.pick(n)}}(this)}),n={},n[this.calendar._et("pick")]=function(e){return function(t){return e.pick(t.date)}}(this),r.listen(this.calendar.calendar,n),r.listen(window,{"fullscreenchange orientationchange resize":function(e){return function(t){if(e.isOpen)return e.close("resize")}}(this)})}return DatePicker.pkgPrefix="data-mh-date-picker--",DatePicker.prototype.close=function(e){if(this.isOpen)return this._dom.picker.classList.add(this._bem("mh-date-picker","","closed")),this._isOpen=!1,r.dispatch(this.input,this._et("close"),{reason:e})},DatePicker.prototype.open=function(){var e;return e=this.calendar.constructor.parseDate(this.input.value,this.parsers),e&&(this.calendar.goto(e.getMonth(),e.getFullYear()),this.calendar.select(e)),this._track(),this._dom.picker.classList.remove(this._bem("mh-date-picker","","closed")),this._isOpen=!0,r.dispatch(this.input,this._et("open"))},DatePicker.prototype.parseCalendarOptions=function(e,t){var n,a,i,o,u,c;n={},r.config(n,{dates:null,minDate:null,maxDate:null,firstWeekday:null,monthNames:null,weekdayNames:null,parsers:null,test:null},e,t,this.constructor.pkgPrefix);for(i in n)c=n[i],null===c&&delete n[i];return a=function(e){var t;return function(){var n,r,a,i;for(a=e.split(","),i=[],n=0,r=a.length;n<r;n++)t=a[n],t.trim()&&i.push(t.trim());return i}()},"string"==typeof n.parsers&&(n.parsers=a(n.parsers)),"string"==typeof n.monthNames&&(n.monthNames=a(n.monthNames)),"string"==typeof n.weekdayNames&&(n.weekdayNames=a(n.weekdayNames)),o=function(e){return function(t){return s.Calendar.parseDate(t,e.parsers)}}(this),"string"==typeof n.minDate&&(n.minDate=o(n.minDate)),"string"==typeof n.maxDate&&(n.maxDate=o(n.maxDate)),"string"==typeof n.dates&&(n.dates=function(){var e,t,r,i;for(r=a(n.dates),i=[],e=0,t=r.length;e<t;e++)u=r[e],o(u)&&i.push(o(u));return i}()),n},DatePicker.prototype.pick=function(e){return this.calendar.select(e),this.constructor.behaviours.input[this._behaviours.input](this,e),r.dispatch(this.input,this._et("pick"),{date:e})},DatePicker.prototype._bem=function(e,t,n){var r;return null==t&&(t=""),null==n&&(n=""),r=e,t&&(r=r+"__"+t),n&&(r=r+"--"+n),r},DatePicker.prototype._et=function(e){return"mh-date-picker--"+e},DatePicker.prototype._track=function(){var e,t,n;return t=this._dom.input.getBoundingClientRect(),n=t.top+=window.scrollY,e=t.left+=window.scrollX,this._dom.picker.style.top=n+t.height+"px",this._dom.picker.style.left=e+"px"},DatePicker.behaviours={input:{"set-hidden":function(e,t){var n,a,i,s,o,u;return n=e.calendar.constructor,a=n.formats[e.format](t),e.input.value=a,u=e.input.getAttribute(e.constructor.pkgPrefix+"hidden"),i=r.one(u),o=e.input.getAttribute(e.constructor.pkgPrefix+"hidden-format"),s=n.formats[o](t),i.value=s},"set-value":function(e,t){var n,r;return n=e.calendar.constructor,r=n.formats[e.format](t),e.input.value=r}}},DatePicker}(),i=function(){function DateRangePicker(){}return DateRangePicker}(),e.exports={Calendar:s.Calendar,DatePicker:a,DateRangePicker:i}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){e.exports=n(1)},function(e,t){var n,r,a,i,s,o,u,c,h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=function(e,t){var n,r,a;null==t&&(t={}),n=document.createElement(e);for(r in t)a=t[r],h.call(n,r)>=0?n[r]=a:n.setAttribute(r,a);return n},u=function(e,t){return null==t&&(t=document),Array.prototype.slice.call(t.querySelectorAll(e))},c=function(e,t){return null==t&&(t=document),t.querySelector(e)},a=function(e,t,n){var r,a,i;null==n&&(n={}),r=document.createEvent("Event"),r.initEvent(t,!0,!0);for(a in n)i=n[a],r[a]=i;return e.dispatchEvent(r)},s=function(e,t){var n,r,a,i;i=[];for(r in t)a=t[r],i.push(function(){var t,i,s,o;for(s=r.split(/\s+/),o=[],t=0,i=s.length;t<i;t++)n=s[t],o.push(e.removeEventListener(n,a));return o}());return i},o=function(e,t){var n,r,a,i;i=[];for(r in t)a=t[r],i.push(function(){var t,i,s,o;for(s=r.split(/\s+/),o=[],t=0,i=s.length;t<i;t++)n=s[t],o.push(e.addEventListener(n,a));return o}());return i},n=function(e,t,n,r,a){var i,s,o,u;null==a&&(a="data-"),o=[];for(s in t)u=t[s],e[s]=u,n.hasOwnProperty(s)&&(e[s]=n[s]),r&&(i=a+s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r.hasAttribute(i)?"number"==typeof u?o.push(e[s]=parseInt(r.getAttribute(i))):u===!1?o.push(e[s]=!0):o.push(e[s]=r.getAttribute(i)):o.push(void 0));return o},i=function(e){return e.replace(/[\^\$\\\.\*\+\?\(\)\[\]\{\}\|]/g,"\\$&")},e.exports={create:r,one:c,many:u,dispatch:a,ignore:s,listen:o,config:n,escapeRegExp:i}}])})},function(e,t,n){var r,a,i=function(e,t){return function(){return e.apply(t,arguments)}};r=n(3),a=function(){function Calendar(e,t){var n,a,s,o,u,c,h,d,l,p;for(null==t&&(t={}),this.goto=i(this.goto,this),this.destroy=i(this.destroy,this),r.config(this,{dates:[],minDate:null,maxDate:null,firstWeekday:1,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},t),this._behaviours={},r.config(this._behaviours,{test:"any"},t),d=new Date,d.setHours(0,0,0,0),this._dateRange=[d,d],this._month=d.getMonth(),this._year=d.getFullYear(),this._dom={},this._dom.parent=e,this._dom.calendar=r.create("div",{class:this._bem("mh-calendar")}),e.appendChild(this._dom.calendar),this._dom.nav=r.create("div",{class:this._bem("mh-calendar","nav")}),this._dom.calendar.appendChild(this._dom.nav),this._dom.month=r.create("div",{class:this._bem("mh-calendar","month")}),this._dom.nav.appendChild(this._dom.month),this._dom.next=r.create("div",{class:this._bem("mh-calendar","next")}),this._dom.previous=r.create("div",{class:this._bem("mh-calendar","previous")}),this._dom.nav.appendChild(this._dom.next),this._dom.nav.appendChild(this._dom.previous),this._dom.weekdays=r.create("div",{class:this._bem("mh-calendar","weekdays")}),this._dom.calendar.appendChild(this._dom.weekdays),a=s=u=this.firstWeekday,c=this.firstWeekday+7;u<=c?s<c:s>c;a=u<=c?++s:--s)l=r.create("div",{class:this._bem("mh-calendar","weekday")}),p=a,a>=this.weekdayNames.length&&(p-=this.weekdayNames.length),l.innerHTML=this.weekdayNames[p],this._dom.weekdays.appendChild(l);for(this._dom.dates=r.create("div",{class:this._bem("mh-calendar","dates")}),this._dom.calendar.appendChild(this._dom.dates),a=o=0,h=42;0<=h?o<h:o>h;a=0<=h?++o:--o)n=r.create("div",{class:this._bem("mh-calendar","date")}),this._dom.dates.appendChild(n);Object.defineProperty(this,"calendar",{value:this._dom.calendar}),Object.defineProperty(this,"parent",{value:this._dom.parent}),Object.defineProperty(this,"dateRange",{get:function(){return this._dateRange}}),Object.defineProperty(this,"month",{get:function(){return this._month}}),Object.defineProperty(this,"year",{get:function(){return this._year}}),r.listen(this._dom.calendar,{mousedown:function(e){return e.preventDefault()}}),r.listen(this._dom.next,{click:function(e){return function(t){return t.preventDefault(),e.next()}}(this)}),r.listen(this._dom.previous,{click:function(e){return function(t){return t.preventDefault(),e.previous()}}(this)}),r.listen(this._dom.dates,{click:function(e){return function(t){var n,a;if(t.preventDefault(),a=t.target,a!==e._dom.dates){for(;a.parentNode!==e._dom.dates;)a=a.parentNode;if(n=e._bem("mh-calendar","date","blocked"),!a.classList.contains(n))return r.dispatch(e.calendar,e._et("pick"),{calendar:e,date:a.__mh_date})}}}(this)}),this.update()}return Calendar.prototype.destroy=function(){return this.parent.removeChild(this.calendar)},Calendar.prototype.goto=function(e,t){return this._month=e,this._year=t,this.update(),r.dispatch(this.calendar,this._et("goto"),{calendar:this,month:e,year:t})},Calendar.prototype.next=function(){var e,t;return e=this.month+1,t=this.year,e>11&&(e=1,t+=1),this.goto(e,t)},Calendar.prototype.previous=function(){var e,t;return e=this.month-1,t=this.year,e<0&&(e=11,t-=1),this.goto(e,t)},Calendar.prototype.select=function(e,t){return null==t&&(t=null),t?this._dateRange=[e,t]:this._dateRange=[e,e],this.update()},Calendar.prototype.update=function(){var e,t,n,r,a,i,s,o,u,c,h;for(this._dom.month.innerHTML=this.monthNames[this.month]+", "+this.year,h=new Date(this.year,this.month,1).getDay(),r=h-this.firstWeekday,r<0&&(r=this.firstWeekday-r),t=new Date(this.year,this.month,1),r>0&&t.setDate(t.getDate()-r),o=[],a=i=0,s=42;0<=s?i<s:i>s;a=0<=s?++i:--i)n=this._dom.dates.childNodes[a],n.innerHTML=t.getDate(),n.__mh_date=new Date(t),n.setAttribute("class",this._bem("mh-calendar","date")),e=n.classList,t.getMonth()!==this.month&&e.add(this._bem("mh-calendar","date","blocked")),this.minDate&&this.minDate.getTime()>t.getTime()&&e.add(this._bem("mh-calendar","date","blocked")),this.maxDate&&this.maxDate.getTime()<t.getTime()&&e.add(this._bem("mh-calendar","date","blocked")),u=this.constructor.behaviours.test[this._behaviours.test],u(this,this.dates,t)||e.add(this._bem("mh-calendar","date","blocked")),c=new Date,c.setHours(0,0,0,0),t.getTime()===c.getTime()&&e.add(this._bem("mh-calendar","date","today")),t.getTime()===this.dateRange[0].getTime()&&e.add(this._bem("mh-calendar","date","range-start")),t.getTime()===this.dateRange[1].getTime()&&e.add(this._bem("mh-calendar","date","range-end")),t.getTime()>this.dateRange[0].getTime()&&t.getTime()<this.dateRange[1].getTime()&&e.add(this._bem("mh-calendar","date","in-range")),o.push(t.setDate(t.getDate()+1));return o},Calendar.prototype._bem=function(e,t,n){var r;return null==t&&(t=""),null==n&&(n=""),r=e,t&&(r=r+"__"+t),n&&(r=r+"--"+n),r},Calendar.prototype._et=function(e){return"mh-calendar--"+e},Calendar.parseDate=function(e,t){var n,r,a,i;if(e instanceof Date)return e;for(r=0,a=t.length;r<a;r++)if(i=t[r],n=this.parsers[i](e))return n},Calendar.behaviours={test:{any:function(e,t,n){return!0},excluding:function(e,t,n){var r,a,i;for(r=0,a=t.length;r<a;r++)if(i=t[r],n.getTime()===i.getTime())return!1;return!0},only:function(e,t,n){var r,a,i;for(r=0,a=t.length;r<a;r++)if(i=t[r],n.getTime()===i.getTime())return!0;return!1},weekdays:function(e,t,n){return t.indexOf(n.getDay())>-1}}},Calendar.formats={dmy:function(e){var t,n,r;return t=("00"+e.getDate()).slice(-2),n=("00"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),t+"/"+n+"/"+r},human_en:function(e){var t;return t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],e.getDate()+" "+t+" "+e.getFullYear()},human_abbr_en:function(e){var t;return t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],e.getDate()+" "+t+" "+e.getFullYear()},iso:function(e){var t,n,r;return t=("00"+e.getDate()).slice(-2),n=("00"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),r+"-"+n+"-"+t},mdy:function(e){var t,n,r;return t=("00"+e.getDate()).slice(-2),n=("00"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),n+"/"+t+"/"+r}},Calendar.parsers={dmy:function(e){var t,n,r,a,i,s;if(n=/^(\d{1,2})(\/|\.|\-)(\d{1,2})(\/|\.|\-)(\d{2}|\d{4})$/,a=n.exec(e),a&&(s=parseInt(a[5]),i=parseInt(a[3])-1,r=parseInt(a[1]),s<100&&(s+=100*parseInt((new Date).getFullYear()/100)),t=new Date(s,i,r),t.getFullYear()===s&&t.getMonth()===i&&t.getDate()===r))return t},human_en:function(e){var t,n,r,a,i,s,o,u,c,h,d,l,p,m,f;if(d={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},l={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},e=e.trim(),e=e.toLowerCase(),e=e.replace(","," "),e=e.replace("st"," "),e=e.replace("nd"," "),e=e.replace("rd"," "),e=e.replace("th"," "),n=e.split(/\s+/),2===n.length||3===n.length){for(h=null,p=n.slice(),i=s=0,u=p.length;s<u;i=++s)if(t=p[i],d.hasOwnProperty(t)?h=d[t]:l.hasOwnProperty(t)&&(h=l[t]),null!==h){n.splice(i,1);break}if(h){for(f=null,m=n.slice(),i=o=0,c=m.length;o<c;i=++o)if(t=m[i],4===t.length){f=parseInt(t),n.splice(i,1);break}if(null===f&&2===n.length&&(f=parseInt(n[1]),n.splice(1,1)),null===f&&(f=(new Date).getFullYear()),NaN!==f&&(f<100&&(f+=100*parseInt((new Date).getFullYear()/100)),a=parseInt(n[0]),NaN!==a&&(r=new Date(f,h,a),r.getFullYear()===f&&r.getMonth()===h&&r.getDate()===a)))return r}}},iso:function(e){var t,n,r,a,i,s;if(n=/^(\d{4})-(\d{2})-(\d{2})$/,a=n.exec(e),a&&(s=parseInt(a[1]),i=parseInt(a[2])-1,r=parseInt(a[3]),t=new Date(s,i,r),t.getFullYear()===s&&t.getMonth()===i&&t.getDate()===r))return t},mdy:function(e){var t,n,r,a,i,s;if(n=/^(\d{1,2})(\/|\.|\-)(\d{1,2})(\/|\.|\-)(\d{2}|\d{4})$/,a=n.exec(e),a&&(s=parseInt(a[5]),i=parseInt(a[1])-1,r=parseInt(a[3]),s<100&&(s+=100*parseInt((new Date).getFullYear()/100)),t=new Date(s,i,r),t.getFullYear()===s&&t.getMonth()===i&&t.getDate()===r))return t}},Calendar}(),e.exports={Calendar:a}}])});