!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ManhattanDatePicker=t():e.ManhattanDatePicker=t()}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){n(1),e.exports=n(2)},function(e,t,n){e.exports=n.p+"date-picker.css"},function(e,t,n){var r,a,i,s,o,c=function(e,t){return function(){return e.apply(t,arguments)}},u=function(e,t){function ctor(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=n(3),i=n(4).Calendar,a=function(){function BasePicker(){this.close=c(this.close,this),this._isOpen=!1,Object.defineProperty(this,"isOpen",{get:function(e){return function(){return e._isOpen}}(this)}),r.listen(window,{"fullscreenchange orientationchange resize":function(e){return function(t){if(e.isOpen)return e.close("resize")}}(this)})}return BasePicker.prototype.close=function(e,t,n){if(this.isOpen)return this._dom.picker.classList.add(this._bem(t,"","closed")),this._isOpen=!1,r.dispatch(e,this._et("close"),{reason:n})},BasePicker.prototype._bem=function(e,t,n){var r;return null==t&&(t=""),null==n&&(n=""),r=e,t&&(r=r+"__"+t),n&&(r=r+"--"+n),r},BasePicker.prototype._track=function(e){var t,n,r;return n=e.getBoundingClientRect(),r=n.top+=window.scrollY,t=n.left+=window.scrollX,this._dom.picker.style.top=r+n.height+"px",this._dom.picker.style.left=t+"px"},BasePicker}(),s=function(e){function DatePicker(e,t){var n,a;null==t&&(t={}),this.open=c(this.open,this),DatePicker.__super__.constructor.call(this),r.config(this,{closeOnPick:!1,format:"human_en",parsers:["human_en","dmy","iso"]},t,e,this.constructor.clsPrefix),this._behaviours={},r.config(this._behaviours,{input:"set-value"},t,e,this.constructor.clsPrefix),this._dom={},this._dom.input=e,this._dom.input.__mh_typeahead=this,this._dom.picker=r.create("div",{class:[this._bem("mh-date-picker"),this._bem("mh-date-picker","","closed")].join(" ")}),document.body.appendChild(this._dom.picker),a=i.proxyOptions(t,e),this._calendar=new i(this._dom.picker,a),Object.defineProperty(this,"calendar",{get:function(e){return function(){return e._calendar}}(this)}),Object.defineProperty(this,"input",{value:this._dom.input}),r.listen(this.input,{blur:function(e){return function(){return e.close("blur")}}(this),click:function(e){return function(){return e.open()}}(this),focus:function(e){return function(){return e.open()}}(this),change:function(e){return function(){var t;if(t=i.parseDate(e.input.value,e.parsers))return e.pick(t,"input")}}(this)}),n={},n[this.calendar._et("pick")]=function(e){return function(t){return e.pick(t.date,"calendar")}}(this),r.listen(this.calendar.calendar,n)}return u(DatePicker,e),DatePicker.clsPrefix="data-mh-date-picker--",DatePicker.prototype.close=function(e){return DatePicker.__super__.close.call(this,this.input,"mh-date-picker",e)},DatePicker.prototype.open=function(){var e;return e=i.parseDate(this.input.value,this.parsers),e&&(this.calendar.goto(e.getMonth(),e.getFullYear()),this.calendar.select(e)),this._track(),this._dom.picker.classList.remove(this._bem("mh-date-picker","","closed")),this._isOpen=!0,r.dispatch(this.input,this._et("open"))},DatePicker.prototype.pick=function(e,t){if(null==t&&(t=""),this.calendar.select(e),r.dispatch(this.input,this._et("pick"),{date:e,source:t})&&(this.constructor.behaviours.input[this._behaviours.input](this,e),this.closeOnPick))return this.close({reason:"pick"})},DatePicker.prototype._et=function(e){return"mh-date-picker--"+e},DatePicker.prototype._track=function(){return DatePicker.__super__._track.call(this,this.input)},DatePicker.behaviours={input:{"set-hidden":function(e,t){var n,a,s,o,c;return n=i.formats[e.format](t),e.input.value=n,c=e.input.getAttribute(e.constructor.clsPrefix+"hidden"),a=r.one(c),o=e.input.getAttribute(e.constructor.clsPrefix+"hidden-format"),s=calendarCls.formats[o](t),a.value=s},"set-value":function(e,t){var n;return n=i.formats[e.format](t),e.input.value=n}}},DatePicker}(a),o=function(e){function DateRangePicker(e,t,n){var a,s,o,c,u,h;for(null==n&&(n={}),DateRangePicker.__super__.constructor.call(this),r.config(this,{closeOnPick:!1,format:"human_en",parsers:["human_en","dmy","iso"],pinToStart:!1},n,e,this.constructor.clsPrefix),this._behaviours={},r.config(this._behaviours,{input:"set-value"},n,e,this.constructor.clsPrefix),this._dom={},this._dom.picker=r.create("div",{class:[this._bem("mh-date-range-picker"),this._bem("mh-date-range-picker","","closed")].join(" ")}),document.body.appendChild(this._dom.picker),this._dom.startInput=e,this._dom.startInput.__mh_typeahead=this,this._dom.endInput=t,this._dom.endInput.__mh_typeahead=this,u=i.proxyOptions(n,e),this._calendars=[new i(this._dom.picker,u),new i(this._dom.picker,u)],this._picking="start",Object.defineProperty(this,"calendars",{get:function(e){return function(){return e._calendars}}(this)}),Object.defineProperty(this,"endInput",{value:this._dom.endInput}),Object.defineProperty(this,"startInput",{value:this._dom.startInput}),Object.defineProperty(this,"picking",{get:function(e){return function(){return e._picking}}(this)}),h=[this.startInput,this.endInput],s=0,c=h.length;s<c;s++)o=h[s],r.listen(o,{click:function(e){return e.target.focus()},focus:function(e){return function(t){return t.target===e.startInput?e._picking="start":e._picking="end",e.open()}}(this),blur:function(e){return function(){var t;if(t=document.activeElement,e.startInput!==t&&e.endInput!==t)return e.close("blur")}}(this),change:function(e){return function(t){var n,r;if(n=i.parseDate(t.target.value,e.parsers))return r=e.calendars[0].dateRange,"start"===e.picking?r[0]=n:r[1]=n,e.pick(r,{source:"input"})}}(this)});a={},a[this.calendars[0]._et("pick")]=function(e){return function(t){var n;return n=e.calendars[0].dateRange,"start"===e.picking?n[0]=t.date:n[1]=t.date,e.pick(n,{source:"calendar"})}}(this),a[this.calendars[0]._et("view")]=function(e){return function(t){return 0===e.calendars.indexOf(t.calendar)?e.calendars[1].sync(e.calendars[0],1):e.calendars[0].sync(e.calendars[1],-1)}}(this),r.listen(this.calendars[0].calendar,a),r.listen(this.calendars[1].calendar,a)}return u(DateRangePicker,e),DateRangePicker.clsPrefix="data-mh-date-range-picker--",DateRangePicker.prototype.close=function(e){return DateRangePicker.__super__.close.call(this,this.startInput,"mh-date-range-picker",e)},DateRangePicker.prototype.open=function(){var e,t,n,a,s,o,c,u,h,d,l,p;for(o=this.startInput,"end"===this.picking&&(o=this.endInput),l=i.parseDate(this.startInput.value,this.parsers),a=i.parseDate(this.endInput.value,this.parsers),n=this.calendars[0].dateRange,l&&(n[0]=l),a&&(n[1]=a),h=null,u=null,p=null,"start"===this.picking?(u=n[1],p=n[0]):(h=n[0],p=n[1]),d=this.calendars,s=0,c=d.length;s<c;s++)e=d[s],e.minDate=h,e.maxDate=u,e.select(n[0],n[1]);return"start"===this.picking?this.calendars[0].goto(p.getMonth(),p.getFullYear()):this.calendars[1].goto(p.getMonth(),p.getFullYear()),this._track(this.pinToStart?this.startInput:o),t=this._bem("mh-date-range-picker","","closed"),this._dom.picker.classList.remove(t),this._isOpen=!0,r.dispatch(this.startInput,this._et("open"))},DateRangePicker.prototype.pick=function(e,t){var n,a,i,s,o;for(o=this.calendars,i=0,s=o.length;i<s;i++)n=o[i],n.select(e[0],e[1]);return a={dateRange:e,source:t},r.dispatch(this.startInput,this._et("pick"),a)&&(this.constructor.behaviours.input[this._behaviours.input](this,e),this.closeOnPick&&this.close()),"start"===this.picking?this.endInput.focus():this.startInput.focus()},DateRangePicker.prototype._et=function(e){return"mh-date-range-picker--"+e},DateRangePicker.behaviours={input:{"set-value":function(e,t){var n;return n=i.formats[e.format],e.startInput.value=n(t[0]),e.endInput.value=n(t[1])}}},DateRangePicker}(a),e.exports={Calendar:i,DatePicker:s,DateRangePicker:o}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){e.exports=n(1)},function(e,t){var n,r,a,i,s,o,c,u,h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=function(e,t){var n,r,a;null==t&&(t={}),n=document.createElement(e);for(r in t)a=t[r],h.call(n,r)>=0?n[r]=a:n.setAttribute(r,a);return n},c=function(e,t){return null==t&&(t=document),Array.prototype.slice.call(t.querySelectorAll(e))},u=function(e,t){return null==t&&(t=document),t.querySelector(e)},a=function(e,t,n){var r,a,i;null==n&&(n={}),r=document.createEvent("Event"),r.initEvent(t,!0,!0);for(a in n)i=n[a],r[a]=i;return e.dispatchEvent(r)},s=function(e,t){var n,r,a,i;i=[];for(r in t)a=t[r],i.push(function(){var t,i,s,o;for(s=r.split(/\s+/),o=[],t=0,i=s.length;t<i;t++)n=s[t],o.push(e.removeEventListener(n,a));return o}());return i},o=function(e,t){var n,r,a,i;i=[];for(r in t)a=t[r],i.push(function(){var t,i,s,o;for(s=r.split(/\s+/),o=[],t=0,i=s.length;t<i;t++)n=s[t],o.push(e.addEventListener(n,a));return o}());return i},n=function(e,t,n,r,a){var i,s,o,c;null==a&&(a="data-"),o=[];for(s in t)c=t[s],e[s]=c,n.hasOwnProperty(s)&&(e[s]=n[s]),r&&(i=a+s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r.hasAttribute(i)?"number"==typeof c?o.push(e[s]=parseInt(r.getAttribute(i))):c===!1?o.push(e[s]=!0):o.push(e[s]=r.getAttribute(i)):o.push(void 0));return o},i=function(e){return e.replace(/[\^\$\\\.\*\+\?\(\)\[\]\{\}\|]/g,"\\$&")},e.exports={create:r,one:u,many:c,dispatch:a,ignore:s,listen:o,config:n,escapeRegExp:i}}])})},function(e,t,n){var r,a,i=function(e,t){return function(){return e.apply(t,arguments)}};r=n(3),a=function(){function Calendar(e,t){var n,a,s,o,c,u,h,d,l,p;for(null==t&&(t={}),this.goto=i(this.goto,this),this.destroy=i(this.destroy,this),r.config(this,Calendar.getDefaultConfig(),t),this._behaviours={},r.config(this._behaviours,{test:"any"},t),d=new Date,d.setHours(0,0,0,0),this._dateRange=[d,d],this._month=d.getMonth(),this._year=d.getFullYear(),this._dom={},this._dom.parent=e,this._dom.calendar=r.create("div",{class:this._bem("mh-calendar")}),e.appendChild(this._dom.calendar),this._dom.nav=r.create("div",{class:this._bem("mh-calendar","nav")}),this._dom.calendar.appendChild(this._dom.nav),this._dom.month=r.create("div",{class:this._bem("mh-calendar","month")}),this._dom.nav.appendChild(this._dom.month),this._dom.next=r.create("div",{class:this._bem("mh-calendar","next")}),this._dom.previous=r.create("div",{class:this._bem("mh-calendar","previous")}),this._dom.nav.appendChild(this._dom.next),this._dom.nav.appendChild(this._dom.previous),this._dom.weekdays=r.create("div",{class:this._bem("mh-calendar","weekdays")}),this._dom.calendar.appendChild(this._dom.weekdays),a=s=c=this.firstWeekday,u=this.firstWeekday+7;c<=u?s<u:s>u;a=c<=u?++s:--s)l=r.create("div",{class:this._bem("mh-calendar","weekday")}),p=a,a>=this.weekdayNames.length&&(p-=this.weekdayNames.length),l.innerHTML=this.weekdayNames[p],this._dom.weekdays.appendChild(l);for(this._dom.dates=r.create("div",{class:this._bem("mh-calendar","dates")}),this._dom.calendar.appendChild(this._dom.dates),a=o=0,h=42;0<=h?o<h:o>h;a=0<=h?++o:--o)n=r.create("div",{class:this._bem("mh-calendar","date")}),this._dom.dates.appendChild(n);Object.defineProperty(this,"calendar",{value:this._dom.calendar}),Object.defineProperty(this,"parent",{value:this._dom.parent}),Object.defineProperty(this,"dateRange",{get:function(){return this._dateRange.slice()}}),Object.defineProperty(this,"month",{get:function(){return this._month}}),Object.defineProperty(this,"year",{get:function(){return this._year}}),r.listen(this._dom.calendar,{mousedown:function(e){return e.preventDefault()}}),r.listen(this._dom.next,{click:function(e){return function(t){return t.preventDefault(),e.next()}}(this)}),r.listen(this._dom.previous,{click:function(e){return function(t){return t.preventDefault(),e.previous()}}(this)}),r.listen(this._dom.dates,{click:function(e){return function(t){var n,a;if(t.preventDefault(),a=t.target,a!==e._dom.dates){for(;a.parentNode!==e._dom.dates;)a=a.parentNode;if(n=e._bem("mh-calendar","date","blocked"),!a.classList.contains(n))return r.dispatch(e.calendar,e._et("pick"),{calendar:e,date:a.__mh_date})}}}(this)}),this.update()}return Calendar.getDefaultConfig=function(){return{dates:[],minDate:null,maxDate:null,firstWeekday:1,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},Calendar.prototype.destroy=function(){if(this.calendar.parentNode===this.parent)return this.parent.removeChild(this.calendar)},Calendar.prototype.goto=function(e,t){if(this._month!==e||t!==this._year)return this._month=e,this._year=t,this.update(),r.dispatch(this.calendar,this._et("view"),{calendar:this,month:e,year:t})},Calendar.prototype.next=function(){return this.offset(1)},Calendar.prototype.offset=function(e,t){var n,r;return null==t&&(t=0),e>0?t+=Math.floor(Math.abs(e)/12):t-=Math.floor(Math.abs(e)/12),e%=12,n=this._month+e,r=this._year+t,n<0?(n=12+n,r-=1):n>11&&(n-=12,r+=1),this.goto(n,r)},Calendar.prototype.previous=function(){return this.offset(-1)},Calendar.prototype.select=function(e,t){return null==t&&(t=null),t?this._dateRange=[e,t]:this._dateRange=[e,e],this.update()},Calendar.prototype.sync=function(e,t,n){var r,a;if(null==n&&(n=0),t>0?n+=Math.floor(Math.abs(t)/12):n-=Math.floor(Math.abs(t)/12),t%=12,r=e.month+t,a=e.year+n,r<0?(r=12+r,a-=1):r>11&&(r-=12,a+=1),this._month!==r||a!==this._year)return this._month=r,this._year=a,this.update()},Calendar.prototype.update=function(){var e,t,n,r,a,i,s,o,c,u,h;for(this._dom.month.innerHTML=this.monthNames[this.month]+", "+this.year,h=new Date(this.year,this.month,1).getDay(),r=h-this.firstWeekday,r<0&&(r=this.firstWeekday-r),t=new Date(this.year,this.month,1),r>0&&t.setDate(t.getDate()-r),o=[],a=i=0,s=42;0<=s?i<s:i>s;a=0<=s?++i:--i)n=this._dom.dates.childNodes[a],n.innerHTML=t.getDate(),n.__mh_date=new Date(t),n.setAttribute("class",this._bem("mh-calendar","date")),e=n.classList,t.getMonth()!==this.month&&e.add(this._bem("mh-calendar","date","blocked")),this.minDate&&this.minDate.getTime()>t.getTime()&&e.add(this._bem("mh-calendar","date","blocked")),this.maxDate&&this.maxDate.getTime()<t.getTime()&&e.add(this._bem("mh-calendar","date","blocked")),c=this.constructor.behaviours.test[this._behaviours.test],c(this,this.dates,t)||e.add(this._bem("mh-calendar","date","blocked")),u=new Date,u.setHours(0,0,0,0),t.getTime()===u.getTime()&&e.add(this._bem("mh-calendar","date","today")),t.getTime()===this.dateRange[0].getTime()&&e.add(this._bem("mh-calendar","date","range-start")),t.getTime()===this.dateRange[1].getTime()&&e.add(this._bem("mh-calendar","date","range-end")),t.getTime()>this.dateRange[0].getTime()&&t.getTime()<this.dateRange[1].getTime()&&e.add(this._bem("mh-calendar","date","in-range")),o.push(t.setDate(t.getDate()+1));return o},Calendar.prototype._bem=function(e,t,n){var r;return null==t&&(t=""),null==n&&(n=""),r=e,t&&(r=r+"__"+t),n&&(r=r+"--"+n),r},Calendar.prototype._et=function(e){return"mh-calendar--"+e},Calendar.parseDate=function(e,t){var n,r,a,i;if(e instanceof Date)return e;for(r=0,a=t.length;r<a;r++)if(i=t[r],n=this.parsers[i](e))return n},Calendar.proxyOptions=function(e,t,n){var a,i,s,o,c,u,h,d,l;for(s=Calendar.getDefaultConfig(),s.parsers=[],h={},r.config(h,s,t,n,e),a=function(e,t){return Calendar.parseDate(e,t)},i=function(e){var t;return function(){var n,r,a,i;for(a=e.split(","),i=[],n=0,r=a.length;n<r;n++)t=a[n],t.trim()&&i.push(t.trim());return i}()},"string"==typeof h.firstWeekday&&(h.firstWeekday=Number(h.firstWeekday)),d=["dates","monthNames","parsers","weekdayNames"],o=0,c=d.length;o<c;o++)u=d[o],"string"==typeof h[u]&&(h[u]=i(h[u]));return"string"==typeof h.minDate&&(h.minDate=a(h.minDate,h.parsers)),"string"==typeof h.maxDate&&(h.maxDate=a(h.maxDate,h.parsers)),h.dates=function(){var e,t,n,r;for(n=h.dates,r=[],e=0,t=n.length;e<t;e++)l=n[e],a(l,h.parsers)&&r.push(a(l,h.parsers));return r}(),delete h.parsers,h},Calendar.behaviours={test:{any:function(e,t,n){return!0},excluding:function(e,t,n){var r,a,i;for(r=0,a=t.length;r<a;r++)if(i=t[r],n.getTime()===i.getTime())return!1;return!0},only:function(e,t,n){var r,a,i;for(r=0,a=t.length;r<a;r++)if(i=t[r],n.getTime()===i.getTime())return!0;return!1},weekdays:function(e,t,n){return t.indexOf(n.getDay())>-1}}},Calendar.formats={dmy:function(e){var t,n,r;return t=("00"+e.getDate()).slice(-2),n=("00"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),t+"/"+n+"/"+r},human_en:function(e){var t;return t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],e.getDate()+" "+t+" "+e.getFullYear()},human_abbr_en:function(e){var t;return t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],e.getDate()+" "+t+" "+e.getFullYear()},iso:function(e){var t,n,r;return t=("00"+e.getDate()).slice(-2),n=("00"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),r+"-"+n+"-"+t},mdy:function(e){var t,n,r;return t=("00"+e.getDate()).slice(-2),n=("00"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),n+"/"+t+"/"+r}},Calendar.parsers={dmy:function(e){var t,n,r,a,i,s;if(n=/^(\d{1,2})(\/|\.|\-)(\d{1,2})(\/|\.|\-)(\d{2}|\d{4})$/,a=n.exec(e),a&&(s=Number(a[5]),i=Number(a[3])-1,r=Number(a[1]),s<100&&(s+=100*parseInt((new Date).getFullYear()/100)),t=new Date(s,i,r),t.getFullYear()===s&&t.getMonth()===i&&t.getDate()===r))return t},human_en:function(e){var t,n,r,a,i,s,o,c,u,h,d,l,p,f,m;if(d={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},l={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},e=e.toLowerCase(),e=e.replace(","," "),e=e.replace(/(\d)st/g,"$1 "),e=e.replace(/(\d)nd/g,"$1 "),e=e.replace(/(\d)rd/g,"$1 "),e=e.replace(/(\d)th/g,"$1 "),e=e.trim(),n=e.split(/\s+/),!(n.length>3)){if(h=(new Date).getMonth(),m=(new Date).getFullYear(),n.length>1){for(h=null,p=n.slice(),i=s=0,c=p.length;s<c;i=++s)if(t=p[i],d.hasOwnProperty(t)?h=d[t]:l.hasOwnProperty(t)&&(h=l[t]),null!==h){n.splice(i,1);break}if(null===h)return;for(m=null,f=n.slice(),i=o=0,u=f.length;o<u;i=++o)if(t=f[i],4===t.length){m=Number(t),n.splice(i,1);break}if(null===m&&2===n.length&&(m=Number(n[1]),n.splice(1,1)),NaN===m)return;null===m&&(m=(new Date).getFullYear()),m<100&&(m+=100*parseInt((new Date).getFullYear()/100))}if(a=Number(n[0]),NaN!==a&&(r=new Date(m,h,a),r.getFullYear()===m&&r.getMonth()===h&&r.getDate()===a))return r}},iso:function(e){var t,n,r,a,i,s;if(n=/^(\d{4})-(\d{2})-(\d{2})$/,a=n.exec(e),a&&(s=Number(a[1]),i=Number(a[2])-1,r=Number(a[3]),t=new Date(s,i,r),t.getFullYear()===s&&t.getMonth()===i&&t.getDate()===r))return t},mdy:function(e){var t,n,r,a,i,s;if(n=/^(\d{1,2})(\/|\.|\-)(\d{1,2})(\/|\.|\-)(\d{2}|\d{4})$/,a=n.exec(e),a&&(s=Number(a[5]),i=Number(a[1])-1,r=Number(a[3]),s<100&&(s+=100*parseInt((new Date).getFullYear()/100)),t=new Date(s,i,r),t.getFullYear()===s&&t.getMonth()===i&&t.getDate()===r))return t}},Calendar}(),e.exports={Calendar:a}}])});